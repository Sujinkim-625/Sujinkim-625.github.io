---
layout: default
title: 3. Using Preload Scripts
parent: Electron
nav_order: 4
---

<details open markdown="block">
  <summary>
    Table of contents
  </summary>
  {: .text-delta }
- TOC
{:toc}
</details>

---
## 3. Using Preload Scripts
### What is a preload script?

*Electronì˜ ë©”ì¸ í”„ë¡œì„¸ìŠ¤ëŠ” ì „ì²´ ìš´ì˜ ì²´ì œì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆëŠ” Node.js í™˜ê²½ì´ë‹¤. Electron ëª¨ë“ˆë¿ë§Œ ì•„ë‹ˆë¼ npmì„ í†µí•´ ì„¤ì¹˜í•œ íŒ¨í‚¤ì§€ë‚˜ Node.jsì˜ ê¸°ë³¸ ë‚´ì¥ ëª¨ë“ˆì—ë„ ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆë‹¤. ë°˜ë©´ì—, ë³´ì•ˆìƒì˜ ì´ìœ ë¡œ ë Œë”ëŸ¬ í”„ë¡œì„¸ìŠ¤ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ Node.jsë¥¼ ì‹¤í–‰í•˜ì§€ ì•Šê³  ì›¹ í˜ì´ì§€ë¥¼ ì‹¤í–‰í•œë‹¤.*
{: .fs-3 }   

*Electronì˜ ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ ìœ í˜•ì„ í•¨ê»˜ ì—°ê²°í•˜ë ¤ë©´ preloadë¼ê³  ë¶ˆë¦¬ëŠ” íŠ¹ìˆ˜í•œ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤.*
{: .fs-3 }   
---
### Augmenting the renderer with a preload script
`preload.js`   
*preload scriptëŠ” ë Œë”ëŸ¬ì—ì„œ ì›¹ í˜ì´ì§€ê°€ ë¡œë“œë˜ê¸° ì „ì— ì£¼ì…ë˜ë©°, ì´ëŠ” í¬ë¡¬ ìµìŠ¤í…ì…˜ì˜ ì»¨í…íŠ¸ ìŠ¤í¬ë¦½íŠ¸ì™€ ìœ ì‚¬í•˜ë‹¤. íŠ¹ê¶Œ ìˆëŠ” ì•¡ì„¸ìŠ¤ê°€ í•„ìš”í•œ ë Œë”ëŸ¬ì— ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ë ¤ë©´ contextBridge APIë¥¼ ì‚¬ìš©í•˜ì—¬ ì „ì—­ ê°ì²´ë¥¼ ì •ì˜í•  ìˆ˜ ìˆë‹¤.*
{: .fs-3 }   

<details>
<summary>
ì½”ë“œë³´ê¸°     
</summary>
<div markdown="1">

```
//preload.js
const { contextBridge } = require('electron')

contextBridge.exposeInMainWorld('versions', {
  node: () => process.versions.node,
  chrome: () => process.versions.chrome,
  electron: () => process.versions.electron
  // we can also expose variables, not just functions
})
```
</div>
</details>

<details>
<summary>
ì‹¤í–‰í™”ë©´     
</summary>
<div markdown="1">

![web_application44.png](https://github.com/Sujinkim-625/Sujinkim-625.github.io/blob/main/docs/1.nims/image/web_application44.png?raw=true) 

</div>
</details>

`main.js`

*ì´ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë Œë”ëŸ¬ í”„ë¡œì„¸ìŠ¤ì— ì—°ê²°í•˜ë ¤ë©´ BrowserWindow ìƒì„±ìì˜ webPreferences.preload ì˜µì…˜ì— í•´ë‹¹ ìŠ¤í¬ë¦½íŠ¸ì˜ ê²½ë¡œë¥¼ ì „ë‹¬í•˜ë©´ ëœë‹¤.*
{: .fs-3 }   

<details>
<summary>
ì½”ë“œë³´ê¸°     
</summary>
<div markdown="1">

```
//main.js
const { app, BrowserWindow } = require('electron')
const path = require('node:path')

const createWindow = () => {
  const win = new BrowserWindow({
    width: 800,
    height: 600,
    webPreferences: {
      preload: path.join(__dirname, 'preload.js')
    }
  })

  win.loadFile('index.html')
}

app.whenReady().then(() => {
  createWindow()
})
```
</div>
</details>
<details>
<summary>
ì‹¤í–‰í™”ë©´     
</summary>
<div markdown="1">

![web_application45.png](https://github.com/Sujinkim-625/Sujinkim-625.github.io/blob/main/docs/1.nims/image/web_application45.png?raw=true) 
![web_application46.png](https://github.com/Sujinkim-625/Sujinkim-625.github.io/blob/main/docs/1.nims/image/web_application46.png?raw=true) 
</div>
</details>


`renderer.js`

*í˜„ì¬ ì‹œì ì—ì„œ ë Œë”ëŸ¬ëŠ” versions ì „ì—­ ë³€ìˆ˜ì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆë‹¤. ì´ ì •ë³´ë¥¼ ì°½ì— í‘œì‹œí•´ ë³´ê² ë‹¤. ì´ ë³€ìˆ˜ëŠ” **window.versions** ë˜ëŠ” ê°„ë‹¨íˆ **versions**ë¥¼ í†µí•´ ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. **info**ë¼ëŠ” id ì†ì„±ì„ ê°€ì§„ HTML ìš”ì†Œì˜ í…ìŠ¤íŠ¸ë¥¼ ë³€ê²½í•˜ëŠ” ë°ëŠ” document.getElementById DOM APIë¥¼ ì‚¬ìš©í•˜ê² ë‹¤.*
{: .fs-3 }   

<details>
<summary>
ì½”ë“œë³´ê¸°     
</summary>
<div markdown="1">

```
//renderer.js
const information = document.getElementById('info')
information.innerText = `This app is using Chrome (v${versions.chrome()}), Node.js (v${versions.node()}), and Electron (v${versions.electron()})`
```
</div>
</details>

<details>
<summary>
ì‹¤í–‰í™”ë©´     
</summary>
<div markdown="1">

![web_application47.png](https://github.com/Sujinkim-625/Sujinkim-625.github.io/blob/main/docs/1.nims/image/web_application47.png?raw=true) 
</div>
</details>

`index.html`

*index.htmlì„ ìˆ˜ì •í•˜ì—¬ id ì†ì„±ì´ 'info'ì¸ ìƒˆë¡œìš´ ìš”ì†Œë¥¼ ì¶”ê°€í•˜ê³ , renderer.js ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì—°ê²°*
{: .fs-3 }   

<details>
<summary>
ì½”ë“œë³´ê¸°     
</summary>
<div markdown="1">
```

#index.html
<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta
      http-equiv="Content-Security-Policy"
      content="default-src 'self'; script-src 'self'"
    />
    <meta
      http-equiv="X-Content-Security-Policy"
      content="default-src 'self'; script-src 'self'"
    />
    <title>Hello from Electron renderer!</title>
  </head>
  <body>
    <h1>Hello from Electron renderer!</h1>
    <p>ğŸ‘‹</p>
    <p id="info"></p>
  </body>
  <script src="./renderer.js"></script>
</html>
```
</div>
</details>

<details>
<summary>
ì‹¤í–‰í™”ë©´     
</summary>
<div markdown="1">

![web_application48.png](https://github.com/Sujinkim-625/Sujinkim-625.github.io/blob/main/docs/1.nims/image/web_application48.png?raw=true) 
</div>
</details>

---
ì‹¤í–‰ê²°ê³¼
{: .fs-3 }   

![web_application49.png](https://github.com/Sujinkim-625/Sujinkim-625.github.io/blob/main/docs/1.nims/image/web_application49.png?raw=true) 

---
í”„ë¡œì íŠ¸ íŠ¸ë¦¬
{: .fs-3 }   
![web_application50.png](https://github.com/Sujinkim-625/Sujinkim-625.github.io/blob/main/docs/1.nims/image/web_application50.png?raw=true) 
