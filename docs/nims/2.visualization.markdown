---
layout: default
title: 2. Visualization
parent: NIMS ğŸ‘©â€ğŸ’» 
nav_order: 2
---

<details open markdown="block">
  <summary>
    Table of contents
  </summary>
  {: .text-delta }
- TOC
{:toc}
</details>

---

## Visualization
![d3.js Badge](https://img.shields.io/badge/d3.js-F9A03C?style=flat&logo=d3.js&logoColor=white)
![HTML5 Badge](https://img.shields.io/badge/HTML5-E34F26?style=flat-square&logo=HTML5&logoColor=white)
![JavaScript Badge](https://img.shields.io/badge/JavaScript-F7DF1E?style=flat&logo=JavaScript&logoColor=white)
![CSS3 Badge](https://img.shields.io/badge/CSS-1572B6?style=flat&logo=CSS3&logoColor=white)

> ì£¼ìš” ê¸°ëŠ¥   
> ì‹œë„ ë˜ëŠ” ì‹œêµ°êµ¬ë³„ í•´ë‹¹ ë‚ ì§œì˜ ê°ì—¼ë³‘ ê´€ë ¨ ë°ì´í„°ë¥¼ ì§€ë„ ìœ„ì— í‘œì‹œ. ì§€ë„ ìœ„ì˜ ìƒ‰ì´ ì§„í•´ì§ˆìˆ˜ë¡ í™•ì§„ì(ì‚¬ë§ì)ì˜ ìˆ˜ê°€ í° ê°’ì„ ë‚˜íƒ€ëƒ„. íŠ¹ì • ì§€ì—­ ìœ„ì— ë§ˆìš°ìŠ¤ë¥¼ ì˜¬ë¦¬ë©´ íˆ´íŒìœ¼ë¡œ í•´ë‹¹ ì§€ì—­ì˜ ì •ë³´ë¥¼ ì œê³µ.    
{: .fs-3 }
---

### íŒŒì¼ ì—…ë¡œë“œ ê¸°ëŠ¥
{: .fs-3 }

```
    1. csv íŒŒì¼ë§Œ ì—…ë¡œë“œ ê°€ëŠ¥.
    2. íŒŒì¼ ì—…ë¡œë“œ ì‹œ, vrc(validateRequiredColumns)ë¥¼ í†µí•´ í•„ìˆ˜ columnì´ íŒŒì¼ ì•ˆì— í¬í•¨ë˜ì–´ìˆëŠ”ì§€ í™•ì¸. 
    3. í¬í•¨ë˜ì–´ìˆì§€ ì•Šë‹¤ë©´, ì—ëŸ¬ ë©”ì‹œì§€ ì¶œë ¥   
    inputs.file({
        label: "íŒŒì¼ ì—…ë¡œë“œ",
        accept: ".csv",
        required: true
    })
```
---

### scrubber
{: .fs-3 }

   ```
scrubberë¥¼ í™œìš©í•˜ì—¬ ì¼ì •ì‹œê°„(setting_delay)ë§ˆë‹¤ ë‚ ì§œê°€ ë³€ê²½ë˜ê³ , ì§€ë„ì˜ ìƒ‰ì´ í•´ë‹¹ ë‚ ì§œì˜ ë°ì´í„° ê°’ì— ë”°ë¼ ë³€ê²½ë¨   

Scrubber(formattedDates, {
    delay: setting_delay,
    loop: false,
    autoplay: false,
    format: (d) => d.toLocaleDateString() + "  " + weekOfDay[d.getDay()]
})
   ```
---

### draw the map only once
{: .fs-3 }
   ```
issue > ë‚ ì§œ(ë°ì´í„°)ê°€ ë‹¬ë¼ì§ˆ ë•Œë§ˆë‹¤ ì§€ë„ê°€ ìƒˆë¡œ ê·¸ë ¤ì§€ëŠ” ì˜¤ë¥˜ ë°œìƒ.
fix > í•˜ë‚˜ì˜ ì…€ì—ì„œ ì§€ë„ ê·¸ë¦¬ê¸°, ì§€ë„ ìƒ‰ì¹ í•˜ê¸° ëª¨ë‘ ì‘ì—…ì´ ì´ë£¨ì–´ì§€ë˜ ì½”ë“œë¥¼ ì„œë¡œ ë‹¤ë¥¸ ì…€ìœ¼ë¡œ ë¶„ë¦¬í•˜ì—¬,   
    íŒŒì¼ì„ ì—…ë¡œë“œí•  ë•Œë§Œ ì§€ë„ë¥¼ ê·¸ë¦¬ê³  ì´í›„ì—ëŠ” ì§€ë„ ìœ„ì˜ ìƒ‰ë§Œ ë°”ë€Œë„ë¡ ì½”ë“œë¥¼ ë³€ê²½.    
    ë°ì´í„° ì—…ë°ì´íŠ¸ í›„ ìƒ‰ì´ ì¹ í•´ì§€ëŠ”ë° ê±¸ë¦¬ëŠ” ì‹œê°„ì´ ì¤„ì–´ë“¦.  

map.selectAll("path")
    .data(shape.features)
    .join("path")
    .attr("d", path)
    .attr("id", (d) => "map_" + d.id)
    .attr("stroke", "gray")
    .attr("fill", "#f5ebeb")
    .attr("opacity", 0.8)
    .call(tooltip, tooltipDiv);
```
---

### ì„¤ì • ë³€ê²½ ì‹œ, ì§€ë„ ìœ„ì˜ ìƒ‰ ë³€ê²½ [mutable]({% link docs/nims/mutable.markdown%}#document-d3.js)
{: .fs-3 }
```
issue > ì„¤ì • ë³€ê²½(ì§€ë„ë¥¼ ìƒí•˜ì¢Œìš°ë¡œ ì´ë™, map type ë³€ê²½, zoom, íŠ¹ì • ì§€ì—­ ì„ íƒ) ì‹œ,    
    ì§€ë„ ìœ„ì˜ ìƒ‰ì´ ë³€ê²½ë˜ì§€ ì•ŠëŠ” ì˜¤ë¥˜ ë°œìƒ. ë§ˆìš°ìŠ¤ë¥¼ ì§€ë„ ìœ„ì— ì˜¬ë ¤ì•¼ ìƒ‰ì´ ë³€ê²½ë¨.      
fix > ë³€ìˆ˜ë¥¼ mutableë¡œ ì„ ì–¸.   
    mutableì„ ì‚¬ìš©í•œ ì´ìœ : ë‹¤ë¥¸ ì…€ì˜ ê°’ì´ ë³€ê²½ë  ë•Œë§ˆë‹¤ íŠ¹ì • ì‹œì ì—ë§Œ ì…€ì„ ì—…ë°ì´íŠ¸, ë°˜ì‘ì„±ì„ ì¡°ì‘í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•¨. 
    ì„ì˜ì˜ ë³€ìˆ˜(mutable a)ë¥¼ ì„ ì–¸í•˜ê³ , ë‹¤ë¥¸ mutable ë³€ìˆ˜ë“¤ê³¼ í•˜ë‚˜ì˜ ë¸”ë¡ ì•ˆì—ì„œ ì‘ë™í•˜ë„ë¡ ì½”ë“œ ì‘ì„±.    
    change color ë¸”ë¡ì— aë¥¼ ì„ ì–¸.   

viewof mutableDataForMapUpdate = {
    mutable a = 0;
    mutable mutable_mrtb = margin_ratio_top_bottom;
    mutable mutable_mrlr = margin_ratio_left_right;
    mutable mutable_mt = mapType;
    mutable mutable_zs = zoomSelect;
    mutable mutable_zoom = zoom;
}
```

```
#change color ë¸”ë¡ì— aê°€ ì‹¤í–‰ë˜ë„ë¡ ì½”ë“œ ì¶”ê°€
if (a !== "") {
}
```

---
### íˆ´íŒ ë‚´ìš© ë³€ê²½
{: .fs-3 }
```
issue > íˆ´íŒ ëª…ì´ ì˜ì–´, ì˜µì…˜(í™•ì§„ì/ì‚¬ë§ì)ì— ìƒê´€ì—†ì´ íˆ´íŒì´ ë‚ ì§œ, ì§€ì—­ëª…, ì§€ì—­ì½”ë“œ, í™•ì§„ì ìˆ˜, ì‚¬ë§ì ìˆ˜ë¥¼ ëª¨ë‘ ë‚˜íƒ€ëƒ„.
fix> íˆ´íŒ ëª…ì„ í•œê¸€ë¡œ, ì˜µì…˜ì— ë”°ë¼ íˆ´íŒì— í‘œì‹œë˜ëŠ” í•­ëª©ì„ ë‹¤ë¥´ê²Œ ì„¤ì •

const englishToKorean = {
    date: "ë‚ ì§œ",
    state: "ì§€ì—­ ëª…",
    positive: "í™•ì§„ì ìˆ˜",
    death: "ì‚¬ë§ì ìˆ˜",
    ratio_positive: "í™•ì§„ì ë¹„ìœ¨(ë§Œ ëª…ë‹¹)",
    population: "ì¸êµ¬ ìˆ˜"
};

// ì„ íƒ ì˜µì…˜ì— ë”°ë¼ í‘œì‹œë˜ëŠ” í•­ëª©ì„ ì§€ì •í•˜ëŠ” ê°ì²´
const tooltipKeysByOption = {
    positive: ["date", "state", "positive"],
    death: ["date", "state", "death"],
    ratio_positive: ["date", "state", "ratio_positive"]
};
```
---