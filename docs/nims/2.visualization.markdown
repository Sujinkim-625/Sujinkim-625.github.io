---
layout: default
title: 2. Visualization
parent: NIMS ğŸ‘©â€ğŸ’» 
nav_order: 2
---

<details open markdown="block">
  <summary>
    Table of contents
  </summary>
  {: .text-delta }
- TOC
{:toc}
</details>

---

## Visualization
![d3.js Badge](https://img.shields.io/badge/d3.js-F9A03C?style=flat&logo=d3.js&logoColor=white)
![HTML5 Badge](https://img.shields.io/badge/HTML5-E34F26?style=flat-square&logo=HTML5&logoColor=white)
![JavaScript Badge](https://img.shields.io/badge/JavaScript-F7DF1E?style=flat&logo=JavaScript&logoColor=white)
![CSS3 Badge](https://img.shields.io/badge/CSS-1572B6?style=flat&logo=CSS3&logoColor=white)

> ì£¼ìš” ê¸°ëŠ¥   
> ì‹œë„ ë˜ëŠ” ì‹œêµ°êµ¬ë³„ í•´ë‹¹ ë‚ ì§œì˜ ê°ì—¼ë³‘ ê´€ë ¨ ë°ì´í„°ë¥¼ ì§€ë„ ìœ„ì— í‘œì‹œ. ì§€ë„ ìœ„ì˜ ìƒ‰ì´ ì§„í•´ì§ˆìˆ˜ë¡ í™•ì§„ì(ì‚¬ë§ì)ì˜ ìˆ˜ê°€ í° ê°’ì„ ë‚˜íƒ€ëƒ„. íŠ¹ì • ì§€ì—­ ìœ„ì— ë§ˆìš°ìŠ¤ë¥¼ ì˜¬ë¦¬ë©´ íˆ´íŒìœ¼ë¡œ í•´ë‹¹ ì§€ì—­ì˜ ì •ë³´ë¥¼ ì œê³µ.    
{: .fs-3 }
---

### íŒŒì¼ ì—…ë¡œë“œ ê¸°ëŠ¥
{: .fs-3 }

```
    1. csv íŒŒì¼ë§Œ ì—…ë¡œë“œ ê°€ëŠ¥.
    2. íŒŒì¼ ì—…ë¡œë“œ ì‹œ, vrc(validateRequiredColumns)ë¥¼ í†µí•´ í•„ìˆ˜ columnì´ íŒŒì¼ ì•ˆì— í¬í•¨ë˜ì–´ìˆëŠ”ì§€ í™•ì¸. 
    3. í¬í•¨ë˜ì–´ìˆì§€ ì•Šë‹¤ë©´, ì—ëŸ¬ ë©”ì‹œì§€ ì¶œë ¥   
    inputs.file({
        label: "íŒŒì¼ ì—…ë¡œë“œ",
        accept: ".csv",
        required: true
    })
```
---

### scrubber
{: .fs-3 }

   ```
scrubberë¥¼ í™œìš©í•˜ì—¬ ì¼ì •ì‹œê°„(setting_delay)ë§ˆë‹¤ ë‚ ì§œê°€ ë³€ê²½ë˜ê³ , ì§€ë„ì˜ ìƒ‰ì´ í•´ë‹¹ ë‚ ì§œì˜ ë°ì´í„° ê°’ì— ë”°ë¼ ë³€ê²½ë¨   

Scrubber(formattedDates, {
    delay: setting_delay,
    loop: false,
    autoplay: false,
    format: (d) => d.toLocaleDateString() + "  " + weekOfDay[d.getDay()]
})
   ```
---

### draw the map only once
{: .fs-3 }
   ```
issue > ë‚ ì§œ(ë°ì´í„°)ê°€ ë‹¬ë¼ì§ˆ ë•Œë§ˆë‹¤ ì§€ë„ê°€ ìƒˆë¡œ ê·¸ë ¤ì§€ëŠ” ì˜¤ë¥˜ ë°œìƒ.
fix > í•˜ë‚˜ì˜ ì…€ì—ì„œ ì§€ë„ ê·¸ë¦¬ê¸°, ì§€ë„ ìƒ‰ì¹ í•˜ê¸° ëª¨ë‘ ì‘ì—…ì´ ì´ë£¨ì–´ì§€ë˜ ì½”ë“œë¥¼ ì„œë¡œ ë‹¤ë¥¸ ì…€ìœ¼ë¡œ ë¶„ë¦¬í•˜ì—¬,   
    íŒŒì¼ì„ ì—…ë¡œë“œí•  ë•Œë§Œ ì§€ë„ë¥¼ ê·¸ë¦¬ê³  ì´í›„ì—ëŠ” ì§€ë„ ìœ„ì˜ ìƒ‰ë§Œ ë°”ë€Œë„ë¡ ì½”ë“œë¥¼ ë³€ê²½.    
    ë°ì´í„° ì—…ë°ì´íŠ¸ í›„ ìƒ‰ì´ ì¹ í•´ì§€ëŠ”ë° ê±¸ë¦¬ëŠ” ì‹œê°„ì´ ì¤„ì–´ë“¦.  

map.selectAll("path")
    .data(shape.features)
    .join("path")
    .attr("d", path)
    .attr("id", (d) => "map_" + d.id)
    .attr("stroke", "gray")
    .attr("fill", "#f5ebeb")
    .attr("opacity", 0.8)
    .call(tooltip, tooltipDiv);
```
---

### ì„¤ì • ë³€ê²½ ì‹œ, ì§€ë„ ìœ„ì˜ ìƒ‰ ë³€ê²½ [mutable]({% link docs/nims/mutable.markdown%}#document-d3.js)
{: .fs-3 }
```
issue > ì„¤ì • ë³€ê²½(ì§€ë„ë¥¼ ìƒí•˜ì¢Œìš°ë¡œ ì´ë™, map type ë³€ê²½, zoom, íŠ¹ì • ì§€ì—­ ì„ íƒ) ì‹œ,    
    ì§€ë„ ìœ„ì˜ ìƒ‰ì´ ë³€ê²½ë˜ì§€ ì•ŠëŠ” ì˜¤ë¥˜ ë°œìƒ. ë§ˆìš°ìŠ¤ë¥¼ ì§€ë„ ìœ„ì— ì˜¬ë ¤ì•¼ ìƒ‰ì´ ë³€ê²½ë¨.
    ![web_application11.gif]("")      
      
fix > ë³€ìˆ˜ë¥¼ mutableë¡œ ì„ ì–¸.   
    mutableì„ ì‚¬ìš©í•œ ì´ìœ : ë‹¤ë¥¸ ì…€ì˜ ê°’ì´ ë³€ê²½ë  ë•Œë§ˆë‹¤ íŠ¹ì • ì‹œì ì—ë§Œ ì…€ì„ ì—…ë°ì´íŠ¸, ë°˜ì‘ì„±ì„ ì¡°ì‘í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•¨. 
    ì„ì˜ì˜ ë³€ìˆ˜(mutable a)ë¥¼ ì„ ì–¸í•˜ê³ , ë‹¤ë¥¸ mutable ë³€ìˆ˜ë“¤ê³¼ í•˜ë‚˜ì˜ ë¸”ë¡ ì•ˆì—ì„œ ì‘ë™í•˜ë„ë¡ ì½”ë“œ ì‘ì„±.    
    change color ë¸”ë¡ì— aë¥¼ ì„ ì–¸.   

viewof mutableDataForMapUpdate = {
    mutable a = 0;
    mutable mutable_mrtb = margin_ratio_top_bottom;
    mutable mutable_mrlr = margin_ratio_left_right;
    mutable mutable_mt = mapType;
    mutable mutable_zs = zoomSelect;
    mutable mutable_zoom = zoom;
}
```

```
#change color ë¸”ë¡ì— aê°€ ì‹¤í–‰ë˜ë„ë¡ ì½”ë“œ ì¶”ê°€
if (a !== "") {
}
```

---
### íˆ´íŒ ë‚´ìš© ë³€ê²½
{: .fs-3 }
```
issue > íˆ´íŒ ëª…ì´ ì˜ì–´, ì˜µì…˜(í™•ì§„ì/ì‚¬ë§ì)ì— ìƒê´€ì—†ì´ íˆ´íŒì´ ë‚ ì§œ, ì§€ì—­ëª…, ì§€ì—­ì½”ë“œ, í™•ì§„ì ìˆ˜, ì‚¬ë§ì ìˆ˜ë¥¼ ëª¨ë‘ ë‚˜íƒ€ëƒ„.
fix> íˆ´íŒ ëª…ì„ í•œê¸€ë¡œ, ì˜µì…˜ì— ë”°ë¼ íˆ´íŒì— í‘œì‹œë˜ëŠ” í•­ëª©ì„ ë‹¤ë¥´ê²Œ ì„¤ì •

const englishToKorean = {
    date: "ë‚ ì§œ",
    state: "ì§€ì—­ ëª…",
    positive: "í™•ì§„ì ìˆ˜",
    death: "ì‚¬ë§ì ìˆ˜",
    ratio_positive: "í™•ì§„ì ë¹„ìœ¨(ë§Œ ëª…ë‹¹)",
    population: "ì¸êµ¬ ìˆ˜"
};

// ì„ íƒ ì˜µì…˜ì— ë”°ë¼ í‘œì‹œë˜ëŠ” í•­ëª©ì„ ì§€ì •í•˜ëŠ” ê°ì²´
const tooltipKeysByOption = {
    positive: ["date", "state", "positive"],
    death: ["date", "state", "death"],
    ratio_positive: ["date", "state", "ratio_positive"]
};

``` 
![web_application18.png](https://github.com/Sujinkim-625/Sujinkim-625.github.io/blob/main/docs/nims/image/web_application18.png?raw=true) 
![web_application19.png](https://github.com/Sujinkim-625/Sujinkim-625.github.io/blob/main/docs/nims/image/web_application19.png?raw=true)     
![web_application20.png](https://github.com/Sujinkim-625/Sujinkim-625.github.io/blob/main/docs/nims/image/web_application20.png?raw=true)   
---
### ì‚¼í•­ì—°ì‚°ì   
{: .fs-3 }   
```
issue > ì‚¼í•­ì—°ì‚°ìì˜ ì‚¬ìš©ì´ ë„ˆë¬´ ë§ë‹¤.    
fix > ì–´ëŠ ê²½ìš°ì— ì‚¼í•­ ì—°ì‚°ìë¥¼ ì‚¬ìš©í•˜ëŠ”ì§€ ê³µì‹ ë¬¸ì„œ í™•ì¸í•˜ê¸°   
    ì‚¼í•­ì—°ì‚°ì ì‚¬ìš©ì„ í†µí•´ null ê°’ì´ ë‚˜ì˜¬ ìˆ˜ ìˆëŠ” ìƒí™©ì— ëŒ€ì‘í•  ìˆ˜ ìˆë‹¤.    
    ë§ˆì§€ë§‰ ì¡°ê±´ì— nullì´ ì¶œë ¥ë˜ëŠ” ì¡°ê±´ì´ í¬í•¨ë˜ì–´ìˆê¸° ë•Œë¬¸ì— ì‚¼í•­ ì—°ì‚°ì ì‚¬ìš©ì´ ì ì ˆí•˜ë‹¤ê³  í•  ìˆ˜ ìˆë‹¤.   
    â†’ë‹¤í˜•ì„±ì— ëŒ€í•´ ìƒê°í•´ë³´ê¸° 

ì•„ë˜ì˜ ì½”ë“œëŠ” ì†Œìˆ«ì  3ë²ˆì§¸ìë¦¬ê¹Œì§€ë§Œ ë‚˜íƒ€ë‚´ê¸° ìœ„í•œ ì½”ë“œ, ì½”ë“œê°€ ë„ˆë¬´ ë”ëŸ½ë‹¤,,,   
`<strong>${englishToKorean[key]}</strong>: ${
    typeof value === "object"
        ? value.toLocaleString("ko-KR")
        : key === "ratio_positive" && calculateDecimalLength(value) > 3
        ? parseFloat(value).toFixed(3)
        : key === "positive" && calculateDecimalLength(value) > 3
        ? parseFloat(value).toFixed(3)
        : key === "death" && calculateDecimalLength(value) > 3
        ? parseFloat(value).toFixed(3)
        : value
}`
```
[[ë¦¬íŒ©í† ë§ ì¡°ê±´ë¬¸ì§€ì˜¥ íƒˆì¶œí•˜ê¸°]]("https://velog.io/@dolfalf/%EB%A6%AC%ED%8C%A9%ED%86%A0%EB%A7%81-%EC%A1%B0%EA%B1%B4%EB%AC%B8%EC%A7%80%EC%98%A5-%ED%83%88%EC%B6%9C%ED%95%98%EA%B8%B0-if-else-if-else") 

---

### í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°
{: .fs-3 }   
```
issue > ì½”ë“œì˜ ì¬ì‚¬ìš©ì„ ìœ„í•´, í•¨ìˆ˜ë¡œ ë§Œë“œëŠ” ì‘ì—… ì§„í–‰ì´ í•„ìš”
[ì™ì™ ë“¤ì–´ì˜¤ëŠ” í•¨ìˆ˜í˜• ì½”ë”©] (ë‚˜ì¤‘ì— ë³¼ ì±…!)
```

---

### ê°œë°œìì˜ ì˜ë„
{: .fs-3 }   

```
issue > â€œíŠ¹ì •ì§€ì—­ë§Œ ë³´ê¸°â€ì—ì„œ í”¼ë“œë°±ì€ íŠ¹ì •ì§€ì—­ì´ ê°€ìš´ë°ì— ì™”ìœ¼ë©´ ì¢‹ê² ë‹¤. + ì£¼ë³€ ì§€ì—­ì´ ë” ë³´ì˜€ìœ¼ë©´ ì¢‹ê² ë‹¤.  
fix > íŠ¹ì • ì§€ì—­ì´ ì‘ê²Œ ë³´ì´ëŠ” ë¬¸ì œ ë°œìƒ.    
    ë‹¤ì‹œ ì§ˆë¬¸í•˜ë‹ˆ ì£¼ë³€ ì§€ì—­ì„ í•¨ê»˜ ë´ì„œ í™•ì‚°ì˜ ì¶”ì´ë¥¼ ë³´ë ¤ëŠ” ì˜ë„ì˜ í”¼ë“œë°±,    
    ë‚˜ì˜ ê°œë°œ ì˜ë„ëŠ” í™•ì‚° ì¶”ì´ëŠ” ì „ì²´ ì§€ì—­ë³´ê¸°ì—ì„œ ê°€ëŠ¥í•˜ê³  íŠ¹ì • ì§€ì—­ì€ ì‹œêµ°êµ¬ë¥¼ ë³¼ ë•Œ ë” ì˜ ë³´ì´ë„ë¡ í•˜ê¸° ìœ„í•´ êµ¬í˜„í•œ ê²ƒ.    
    **ê°œë°œìê°€ ì •í™•í•œ ì˜ë„ë¥¼ ê°€ì§€ê³  ì„¤ë“ ê°€ëŠ¥í•˜ë‹¤ë©´** ë‚´ ë°©í–¥ìœ¼ë¡œ ê°œë°œí•˜ëŠ” ê²ƒì´ ì˜³ë‹¤.
```

---
### UI/UX 1
{: .fs-3 }   
```
issue > ì „ì²´ ì§€ì—­ ë³´ê¸°ëŠ” ì „ì²´ì ì¸ íë¦„ì„ ë³´ê¸°ì—ëŠ” ì¢‹ì§€ë§Œ, íŠ¹ì • ì§€ì—­ì„ ë³´ê¸°ì—ëŠ” ì–´ë ¤ì›€ì´ ì¡´ì¬.   
    (ex.ì„œìš¸íŠ¹ë³„ì‹œì˜ ì§€ì—­ë“¤ì´ ë„ˆë¬´ ì‘ê²Œ ë³´ì¸ë‹¤.)   
fix > íŠ¹ì •ì§€ì—­ë§Œ ë³´ê¸° ê¸°ëŠ¥ ì¶”ê°€ (íŠ¹ì • ì§€ì—­ì€ ì‹œë„ ë‹¨ìœ„ë¡œ ì„ íƒ ê°€ëŠ¥)
``` 
![web_application5.png](https://github.com/Sujinkim-625/Sujinkim-625.github.io/blob/main/docs/nims/image/web_application5.png?raw=true) 
```
íŠ¹ì •ì§€ì—­ë§Œ ë³´ê¸°ì—ì„œ ì„ íƒëœ ì§€ì—­ì„ ê¸°ì¡´ì˜ ìƒ‰ê³¼ ë‹¤ë¥´ê²Œ stroke. 
```   
![web_application6.png](https://github.com/Sujinkim-625/Sujinkim-625.github.io/blob/main/docs/nims/image/web_application6.png?raw=true)  
   
```
ì§€ë„ì˜ ìœ„ì¹˜ëŠ” ì–´ë””ë¡œ?
        â†’ í”¼ë“œë°±: íŠ¹ì • ì§€ì—­ì´ ê°€ìš´ë°ì— ë³´ì´ë˜, ì£¼ë³€ ì§€ì—­ë„ í•¨ê»˜ ë³´ì´ë„ë¡   
        â†’ ê°œë°œìì˜ ì˜ë„: íŠ¹ì • ì§€ì—­ì€ íŠ¹ì • ì§€ì—­ì´ ì˜ ë³´ì´ë„ë¡   
        â‡’ user controlì´ ê°€ëŠ¥í•˜ë„ë¡ ì„¤ê³„ ë³€ê²½   
```
---

### UI/UX 2
{: .fs-3 }   
```
fix > userê°€ controlí•  ìˆ˜ ìˆëŠ” ë¶€ë¶„ ì¶”ê°€(ex. delay ì†ë„ ì¡°ì ˆ, ì§€ë„ ìœ„ì¹˜ ì¡°ì ˆ)
    â†’ delay slider, top/bottom/left/right slider ì¶”ê°€
```   
![web_application7.png](https://github.com/Sujinkim-625/Sujinkim-625.github.io/blob/main/docs/nims/image/web_application7.png?raw=true)  
![web_application8.png](https://github.com/Sujinkim-625/Sujinkim-625.github.io/blob/main/docs/nims/image/web_application8.png?raw=true)    
```  
    â‡’ ê°œë°œí•œ ì„œë¹„ìŠ¤ê°€ user controlì´ ë§ë‹¤ë©´, ì‚¬ìš©ìê°€ í”¼ë¡œê°ì„ ëŠë¼ì§€ ì•Šì„ê¹Œ?
        â†’ top, bottom, left, right 4ê°œì˜ slider ëŒ€ì‹  2ê°œì˜ sliderë¡œ ì¤„ì´ëŠ” ê±´ ì–´ë–¨ê¹Œ
```   
![web_application9.png](https://github.com/Sujinkim-625/Sujinkim-625.github.io/blob/main/docs/nims/image/web_application9.png?raw=true)  
   
```        
â†’ ì „ì²´ì§€ì—­ë³´ê¸°ì—ì„œ slider ì œê±°    
```   
![web_application12.gif](https://github.com/Sujinkim-625/Sujinkim-625.github.io/blob/main/docs/nims/image/web_application12.gif?raw=true)  
   

---

### UI/UX 3
{: .fs-3 }   
```
fix > userê°€ ì‚¬ìš©í•˜ê¸° ì‰¬ìš´ ì„œë¹„ìŠ¤ì¸ê°€?
    â†’ ê¸°ëŠ¥ì— ëŒ€í•œ ì„¤ëª… ì¶”ê°€   
```   
![web_application10.png](https://github.com/Sujinkim-625/Sujinkim-625.github.io/blob/main/docs/nims/image/web_application10.png?raw=true)  
    

---

### zoom, pan
{: .fs-3 }   
```
fix > widthì™€ heightì˜ ì¤‘ì‹¬ì ì„ ê¸°ì¤€ìœ¼ë¡œ ì‚¬ê°í˜•ì„ ê·¸ë¦¬ê³ , zoomê¸°ëŠ¥ êµ¬í˜„.  

left = margin_ratio_left_right - (width / 2) * (zoom - 0.2)   
top = margin_ratio_top_bottom - (height / 2) * (zoom - 0.2)   
right = margin_ratio_left_right + (width / 2) * (zoom - 0.2)   
bottom = margin_ratio_top_bottom + (height / 2) * (zoom - 0.2)   
```   
![web_application13.png](https://github.com/Sujinkim-625/Sujinkim-625.github.io/blob/main/docs/nims/image/web_application13.png?raw=true)      
![web_application14.png](https://github.com/Sujinkim-625/Sujinkim-625.github.io/blob/main/docs/nims/image/web_application14.png?raw=true)     
![web_application15.png](https://github.com/Sujinkim-625/Sujinkim-625.github.io/blob/main/docs/nims/image/web_application15.png?raw=true) 

---


### íˆ´íŒ ê³ ì •
{: .fs-3 }   
```
fix > ë§ˆìš°ìŠ¤ ìœ„ì¹˜ì— ë”°ë¼ ë³€ê²½ë˜ëŠ” íˆ´íŒì˜ ìœ„ì¹˜ë¥¼ ê³ ì •ì‹œí‚´.
```   
![web_application16.gif](https://github.com/Sujinkim-625/Sujinkim-625.github.io/blob/main/docs/nims/image/web_application16.gif?raw=true)  
```
ì„ íƒí•œ ì§€ì—­ì˜ centroidë¥¼ ì‚¬ìš©, width/2ë¥¼ ê¸°ì¤€ìœ¼ë¡œ tooltip ìœ„ì¹˜ ë³€ê²½  
```   
![web_application17.gif](https://github.com/Sujinkim-625/Sujinkim-625.github.io/blob/main/docs/nims/image/web_application17.gif?raw=true) 
